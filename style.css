/* Suivi de Chantiers - thème clair avec photo de fond */
:root{
  --bg-overlay: rgba(0,0,0,0.18);
  --panel: rgba(245,244,240,0.92);
  --text:#0b1424;
  --muted:#3f4a5f;
  --line:rgba(0,0,0,0.14);
  --bar-border: rgba(0,0,0,0.45);
  --bar-shadow: 0 2px 4px rgba(0,0,0,0.26), inset 0 1px 0 rgba(255,255,255,0.24);
  --wl-shadow: drop-shadow(0 3px 3px rgba(0,0,0,0.26));
  --accent:#d66b1f;
  --accent-soft:#f3a45c;
  --danger:#e25555;
  --shadow:0 14px 32px rgba(15,23,42,.14);
  --sans: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial;
  --font-xs: 11px;
  --font-sm: 12px;
  --font-md: 13px;
}
*{box-sizing:border-box;}
html{overflow-y:scroll;}
body{
  margin:0;
  font-family:var(--sans);
  font-size:var(--font-sm);
  color:var(--text);
  background:
    linear-gradient(var(--bg-overlay), var(--bg-overlay)),
    url("https://images.unsplash.com/photo-1503387762-592deb58ef4e?auto=format&fit=crop&w=1920&q=80") center/cover fixed no-repeat;
}
.hidden{display:none;}

.topbar{
  position:sticky;top:0;z-index:10;
  display:flex;justify-content:space-between;align-items:center;
  padding:14px 16px;
  background:rgba(255,255,255,0.9);
  backdrop-filter:blur(8px);
  border-bottom:1px solid var(--line);
  box-shadow:var(--shadow);
  gap:12px;
}
.topbar-user{
  flex:1;
  text-align:center;
  font-weight:800;
  color:#0b1424;
  font-size:13px;
}
.topbar-lock{
  text-align:center;
  font-weight:800;
  color:#0b1424;
  font-size:13px;
  padding:4px 10px;
  border-radius:999px;
  background:rgba(255,255,255,0.7);
  border:1px solid rgba(0,0,0,0.08);
}
.brand{font-weight:800;color:var(--text);}
.brand{font-size:22px;}
.copyright{font-size:12px;font-weight:700;color:#475569;margin-left:6px;}
.subtitle{font-size:12px;color:var(--muted);}
.brand-date{
  font-size:15px;
  font-weight:800;
  color:#7b1e24;
}
.actions{display:flex;gap:8px;flex-wrap:wrap;}

.layout{display:grid;grid-template-columns:1fr;gap:14px;padding:14px 14px 14px 288px;width:100%;max-width:none;margin:0;}
.sidebar{
  background:linear-gradient(135deg, rgba(255,255,255,0.96) 0%, rgba(226,224,218,0.9) 45%, rgba(255,255,255,0.98) 100%);
  border:1px solid rgba(255,255,255,0.6);
  border-radius:16px;
  padding:12px;
  box-shadow:0 18px 34px rgba(15,23,42,0.18), inset 0 1px 0 rgba(255,255,255,0.6);
  backdrop-filter:blur(10px);
  position:fixed;
  top:var(--sidebar-top, calc(var(--topbar-h, 60px) + 14px));
  left:14px;
  width:260px;
  max-height:calc(100vh - var(--sidebar-top, calc(var(--topbar-h, 60px) + 14px)) - 14px);
  overflow:auto;
}
.section{margin-bottom:8px;padding:8px;border:1px dashed rgba(0,0,0,.08);border-radius:12px;background:rgba(248,246,241,0.9);}
.section-title{font-size:13px;font-weight:700;color:#475569;margin-bottom:6px;}
.sidebar .section .btn-primary{
  font-size:10px;
  padding:5px 8px;
}
.tabs{display:flex;flex-direction:column;gap:4px;}
.tab{
  padding:5px 8px;
  height:32px;
  border-radius:10px;
  border:1px solid rgba(255,255,255,0.55);
  background:linear-gradient(180deg, rgba(255,255,255,0.98) 0%, rgba(230,226,218,0.92) 100%);
  cursor:pointer;
  font-weight:700;
  text-align:left;
  color:var(--text);
  transition:box-shadow .12s, transform .08s;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:4px;
  box-sizing:border-box;
  box-shadow:0 7px 14px rgba(0,0,0,0.12), inset 0 1px 0 rgba(255,255,255,0.7);
}
.tab .tab-close{
  font-weight:900;
  color:#ef4444;
  padding:2px 8px;
  border-radius:999px;
  transition:transform .08s, background .12s, color .12s;
  font-size:16px;
  line-height:1;
}
.tab .tab-icon{font-size:16px;margin-right:6px;}
.tab .tab-close:hover{background:rgba(239,68,68,0.12);color:#b91c1c;transform:scale(1.06);}
.tab:active{transform:translateY(1px);}
.tab:nth-child(1){border-left:4px solid #d66b1f;}
.tab:nth-child(2){border-left:4px solid #0ea5e9;}
.tab:nth-child(3){border-left:4px solid #22c55e;}
.tab:nth-child(4){border-left:4px solid #e25555;}
.tab:nth-child(5){border-left:4px solid #a855f7;}
.tab.active{box-shadow:0 0 0 3px rgba(0,0,0,.05);background:rgba(255,255,255,1);}
.tab.active{
  background:linear-gradient(180deg, rgba(255,255,255,1) 0%, rgba(230,225,215,0.9) 100%);
  border-color: rgba(0,0,0,0.25);
  box-shadow:0 0 0 3px rgba(0,0,0,0.14), inset 0 1px 0 rgba(255,255,255,0.8);
  color:#111;
  font-weight:800;
}

.main{display:flex;flex-direction:column;gap:8px;}
.main{min-width:0;}
.panel{ 
  background:linear-gradient(165deg, rgba(255,255,255,0.97) 0%, rgba(235,232,226,0.9) 45%, rgba(255,255,255,0.99) 100%);
  border:1px solid rgba(255,255,255,0.55);
  border-radius:14px;
  padding:7px;
  box-shadow:0 18px 40px rgba(15,23,42,0.16), inset 0 1px 0 rgba(255,255,255,0.7);
  backdrop-filter:blur(10px);
  overflow:visible;
}
.panel-head{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:4px;gap:6px;flex-wrap:wrap;}
.panel-metrics{margin-top:2px;display:flex;gap:6px;flex-wrap:wrap;font-size:12px;color:#0f172a;}
.panel-chip{display:inline-flex;align-items:center;gap:6px;padding:4px 8px;border-radius:999px;background:rgba(226,232,240,0.8);border:1px solid rgba(148,163,184,0.6);font-weight:600;}
.panel-title{font-weight:800;color:#0b1424;font-size:16px;}
.panel-sub{font-size:11px;color:#6b7280;}
.panel-title-icon,.card-title-icon,.section-title-icon{margin-right:6px;font-size:18px;vertical-align:middle;}
.tab-icon{font-size:16px;}

.panel-controls{
  margin-top:6px;
  display:flex;
  gap:8px;
  align-items:center;
}
.panel-controls .btn{margin-left:4px;}
.panel-controls.align-right{justify-content:flex-end;}
.filters-indicator{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:4px 8px;
  border-radius:10px;
  background:#f59e0b;
  color:#111;
  font-weight:700;
  box-shadow:0 2px 6px rgba(0,0,0,0.12);
}
.filters-indicator::before{content:"⚠️";}
.filters-indicator.inactive{
  background:#e5e7eb;
  color:#475569;
  box-shadow:none;
}
.filters-indicator.inactive::before{content:"ℹ️";}

.card .kpis .kpi:nth-child(1){background:#ffedd5;border-color:#fb923c;}
.card .kpis .kpi:nth-child(2){background:#dbeafe;border-color:#2563eb;}
.card .kpis .kpi:nth-child(3){background:#dcfce7;border-color:#16a34a;}
.card .kpis .kpi:nth-child(4){background:#fee2e2;border-color:#b91c1c;}
.card .kpis .kpi:nth-child(5){background:#ede9fe;border-color:#7c3aed;}
.card .kpis .kpi:nth-child(6){background:#fef9c3;border-color:#ca8a04;}
.card .kpis .kpi:nth-child(7){background:#cffafe;border-color:#0ea5b0;}

.kpis{display:flex;gap:8px;flex-wrap:wrap;}
.kpi{font-size:12px;color:#0b1020;padding:6px 10px;border:1px solid var(--line);border-radius:10px;background:rgba(255,255,255,0.9);font-weight:700;}
.kpis .kpi:nth-child(1){background:#ffedd5;border-color:#fb923c;}    /* total */
.kpis .kpi:nth-child(2){background:#dbeafe;border-color:#2563eb;}    /* chantier complet */
.kpis .kpi:nth-child(3){background:#d1fae5;border-color:#16a34a;}    /* electricite */
.kpis .kpi:nth-child(4){background:#ffe4e6;border-color:#b91c1c;}    /* peinture */
.kpis .kpi:nth-child(5){background:#ede9fe;border-color:#7c3aed;}    /* sol */
.kpis .kpi:nth-child(6){background:#fef3c7;border-color:#ca8a04;}    /* placo */
.kpis .kpi:nth-child(7){background:#cffafe;border-color:#0ea5b0;}    /* faux plafond */
.kpis .kpi:nth-child(8){background:#ffe5f4;border-color:#db2777;}    /* amenagements */
.kpis .kpi:nth-child(9){background:#e2e8f0;border-color:#334155;}    /* mobilier */
.kpis .kpi:nth-child(10){background:#e6ffed;border-color:#16a34a;}   /* plomberie */
.kpis .kpi:nth-child(11){background:#f3f4f6;border-color:#6b7280;}   /* a_planifier */
.kpis .kpi:nth-child(12){background:#e5e7eb;border-color:#475569;}   /* prepa */
.kpis .kpi:nth-child(13){background:#dbeafe;border-color:#2563eb;}   /* en_cours */
.kpis .kpi:nth-child(14){background:#fef9c3;border-color:#ca8a04;}   /* sechage */
.kpis .kpi:nth-child(15){background:#cffafe;border-color:#0ea5b0;}   /* reception */
.kpis .kpi:nth-child(16){background:#dcfce7;border-color:#16a34a;}   /* termine */
.kpis .kpi:nth-child(17){background:#fee2e2;border-color:#b91c1c;}   /* bloque */
.kpis .kpi:nth-child(18){background:#e5e7eb;border-color:#4b5563;}   /* reporte */

.tablewrap{
  overflow:auto;
  border:1px solid rgba(255,255,255,0.55);
  border-radius:14px;
  background:linear-gradient(180deg, rgba(255,255,255,0.97) 0%, rgba(240,238,233,0.9) 100%);
  box-shadow:0 10px 22px rgba(0,0,0,0.12), inset 0 1px 0 rgba(255,255,255,0.65);
}
.table{width:100%;border-collapse:separate;border-spacing:0;min-width:900px;}
.table th{
  padding:10px;
  border-bottom:1px solid rgba(0,0,0,0.06);
  font-size:12px;
  text-align:left;
  background:linear-gradient(180deg, rgba(248,247,244,0.98) 0%, rgba(232,229,223,0.94) 100%);
  color:#0b1424;
  font-weight:700;
  line-height:1.2;
  position:sticky;top:0;z-index:1;
  cursor: pointer;
}
.table th[data-sort]::after{content:" ▲▼";font-size:11px;color:#64748b;margin-left:6px;opacity:1;}
.table th.sorted-asc::after{content:" ▲";color:#0f172a;opacity:1;}
.table th.sorted-desc::after{content:" ▼";color:#0f172a;opacity:1;}
.table th[data-sort]:hover{background:linear-gradient(180deg, rgba(226,226,222,0.96) 0%, rgba(212,209,202,0.9) 100%);}
.table td{
  padding:4px 6px;
  border-bottom:1px solid rgba(0,0,0,0.05);
  font-size:12px;color:#0f172a;
  line-height:1.3;
  background:rgba(255,255,255,0.9);
}
.table tbody tr:nth-child(2n){background:rgba(246,246,244,0.6);}
.table tbody tr:hover td{background:inherit;}
.table tbody tr{cursor:pointer;}
.gantt-table tbody tr:hover td{background:inherit;}
.gantt-table table tbody tr{
  cursor:pointer;
  background:var(--site-bg, transparent) !important;
}
.gantt-table table tbody tr td{
  background:transparent !important;
}
.empty-row{text-align:center;color:var(--muted);}

.card{
  background:linear-gradient(170deg, rgba(255,255,255,0.95) 0%, rgba(236,234,229,0.85) 55%, rgba(255,255,255,0.97) 100%);
  border:1px solid rgba(255,255,255,0.55);
  border-radius:14px;
  padding:10px;
  box-shadow:0 12px 26px rgba(0,0,0,0.12), inset 0 1px 0 rgba(255,255,255,0.65);
  backdrop-filter:blur(8px);
}
.card-title{font-weight:800;margin-bottom:8px;color:#0b1424;font-size:14px;}
.grid2{display:grid;grid-template-columns:minmax(0,1fr) minmax(0,1fr);gap:6px;align-items:stretch;}
.grid2 > .card{height:100%; display:flex; flex-direction:column;}
.card{padding:10px;}
.row{display:flex;gap:6px;flex-wrap:wrap;margin-top:4px;}
.label{font-size:12px;color:#334155;margin-top:6px;display:block;font-weight:700;}
.date-warn{
  font-size:11px;
  color:#b91c1c;
  font-weight:700;
  margin-top:4px;
}
.config-footer{
  margin-top:10px;
  font-size:12px;
  color:#475569;
  font-weight:700;
  display:flex;
  align-items:center;
  gap:6px;
}
.config-users{
  margin-top:10px;
  padding-top:8px;
  border-top:1px dashed rgba(0,0,0,0.12);
}
.config-users-title{
  font-size:12px;
  font-weight:800;
  color:#0b1424;
  margin-bottom:6px;
}
.config-users-row{
  display:flex;
  gap:6px;
  align-items:center;
  margin-bottom:6px;
  flex-wrap:wrap;
}
.config-users-list{
  display:flex;
  flex-direction:column;
  gap:6px;
}
.config-user-item{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:8px;
  padding:6px 8px;
  border:1px solid rgba(0,0,0,0.1);
  border-radius:8px;
  background:rgba(255,255,255,0.9);
}
.config-user-meta{
  font-size:11px;
  color:#475569;
  font-weight:700;
}
.config-user-actions{display:flex;gap:6px;flex-wrap:wrap;}
.config-copyright{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:16px;height:16px;
  border-radius:50%;
  border:1px solid rgba(0,0,0,0.2);
  font-size:11px;
  color:#0f172a;
  background:#fff;
}
.input, textarea, select{
  width:100%;padding:6px 7px;border-radius:9px;border:1px solid rgba(0,0,0,0.08);font:inherit;font-size:11px;
  background:linear-gradient(185deg, rgba(248,247,244,0.98) 0%, rgba(232,229,223,0.94) 100%);
  color:#0b1424;transition:border-color .12s, box-shadow .12s;
  box-shadow:inset 0 1px 2px rgba(255,255,255,0.8), inset 0 -1px 2px rgba(0,0,0,0.04);
}
.input option{color:#0b1424;}
.input:focus, textarea:focus, select:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 3px rgba(214,107,31,.18);}
textarea{resize:vertical;color:#0b1424;background:rgba(245,244,240,0.94);}

.multiselect{
  position:relative;
  z-index:100000;
  isolation:isolate;
}
.multiselect-menu{
  z-index:999999;
}
.card.desc-panel-open .multiselect{
  z-index:1;
}
.multiselect:focus-within .multiselect-display{
  border-color:var(--accent);
  box-shadow:0 0 0 3px rgba(214,107,31,.18);
}
.multiselect-display{
  padding:6px 7px;border:1px solid rgba(0,0,0,0.08);border-radius:9px;background:linear-gradient(185deg, rgba(255,255,255,0.97) 0%, rgba(239,238,233,0.88) 100%);color:#0b1424;
  cursor:pointer;min-height:32px;display:flex;align-items:center;justify-content:space-between;gap:6px;font-size:11px;
  box-shadow:inset 0 1px 2px rgba(255,255,255,0.8), inset 0 -1px 2px rgba(0,0,0,0.04);
}
.multiselect-display:focus{
  border-color:var(--accent);
  box-shadow:0 0 0 3px rgba(214,107,31,.18);
  outline:none;
}
.multiselect-display.focus{
  border-color:var(--accent);
  box-shadow:0 0 0 3px rgba(214,107,31,.18);
}
.multiselect-display::after{content:"▼";font-size:10px;color:#64748b;}
.multiselect-menu{
  position:absolute;left:0;top:0;
  background:#fff;border:1px solid var(--line);border-radius:10px;box-shadow:var(--shadow);
  max-height:220px;overflow:auto;z-index:200000;padding:6px;font-size:11px;
}
.multiselect-menu:focus,
.multiselect-menu *{position:relative;}

/* Pour s'assurer que le menu passe au-dessus des contenus suivants */
.panel-head, .panel, .card, .tablewrap { position:relative; z-index:auto; }
.multiselect-option{display:flex;align-items:center;gap:6px;padding:5px 6px;border-radius:8px;cursor:pointer;color:#0f172a;font-size:11px;}
.multiselect-option:hover{background:#f1f5ff;}
.multiselect-chips{display:flex;flex-wrap:wrap;gap:6px;align-items:center;}
.chip{padding:4px 8px;border-radius:999px;font-size:12px;border:1px solid var(--line);color:#fff;}
.ms-item{display:flex;align-items:center;gap:8px;padding:6px;border-radius:8px;cursor:pointer;color:#0f172a;}
.ms-item:hover{background:#f1f5ff;}
.ms-item.selected{background:#e0f2fe;}
.ms-checkbox{width:14px;height:14px;border:1px solid var(--line);border-radius:4px;background:#fff;box-shadow:inset 0 1px 2px rgba(0,0,0,.08);}
.ms-item.selected .ms-checkbox{background:#3b82f6;border-color:#2563eb;box-shadow:none;}

/* Bandeau live projet (tâches en cours) */
.panel-live{
  margin-top:4px;
  font-size:13px;
  color:#0f172a;
  display:flex;
  justify-content:flex-end; /* aligné à droite */
  align-items:center;
  gap:8px;
  text-align:right;
}
.panel-live .live-title{font-weight:800;}

.btn{
  padding:7px 9px;border-radius:9px;border:1px solid rgba(0,0,0,0.08);background:linear-gradient(182deg, rgba(255,255,255,0.98) 0%, rgba(235,233,228,0.9) 100%);
  cursor:pointer;font-weight:700;font-size:11px;transition:transform .08s, box-shadow .12s;color:var(--text);
  box-shadow:0 8px 14px rgba(0,0,0,0.08), inset 0 1px 0 rgba(255,255,255,0.7);
}
.btn:active{transform:translateY(1px);}
.btn.icon-btn:active{transform:none;}
.btn.icon-btn{transform:none;}
.btn-primary{border-color:#2563eb;background:linear-gradient(180deg,#dbeafe 0%,#93c5fd 100%);color:#0b1f4a;}
.btn.btn-danger{
  border-color:#b91c1c !important;
  background:#ef4444 !important;
  color:#fff !important;
  box-shadow:0 6px 12px rgba(185,28,28,0.35) !important;
}
.btn-armed{
  border-color:#b91c1c !important;
  background:#ef4444 !important;
  color:#fff !important;
  box-shadow:0 6px 12px rgba(185,28,28,0.28) !important;
}
.is-disabled,
.is-disabled.btn{
  opacity:0.45 !important;
  cursor:not-allowed !important;
  pointer-events:none !important;
}
.btn.btn-success{
  border-color:#15803d !important;
  background:#22c55e !important;
  color:#fff !important;
  box-shadow:0 6px 12px rgba(34,197,94,0.3) !important;
}
.btn-ghost{background:#fff;color:var(--text);}
.pulse{animation:pulse 1s ease;}
@keyframes pulse{
  0%{box-shadow:0 0 0 0 rgba(34,197,94,0.45);}
  70%{box-shadow:0 0 0 10px rgba(34,197,94,0);}
  100%{box-shadow:0 0 0 0 rgba(34,197,94,0);}
}

.gantt-empty{padding:10px;color:var(--muted);font-size:12px;}
.gantt-week{font-weight:500;color:#64748b;}
.gantt-week-date{font-size:10px;color:#6b7280;font-weight:600;margin-top:2px;}
.gantt-toggle-row{
  display:flex;
  gap:6px;
  align-items:center;
  margin:6px 0 4px;
}
.week-cell{position:relative;}
.week-cell::after{
  content:attr(data-range);
  position:absolute;
  left:50%;
  bottom:100%;
  transform:translate(-50%,-4px);
  background:#111827;
  color:#fff;
  padding:4px 8px;
  border-radius:8px;
  font-size:10px;
  white-space:nowrap;
  opacity:0;
  pointer-events:none;
  transition:opacity .12s ease;
  margin-bottom:4px;
  box-shadow:0 4px 10px rgba(0,0,0,0.2);
}
.week-cell:hover::after{
  opacity:1;
}
.week-cell.week-today{
  background:linear-gradient(180deg, rgba(187,247,208,0.9) 0%, rgba(134,239,172,0.85) 100%);
  box-shadow:inset 0 0 0 1px rgba(34,197,94,0.45);
}
.week-cell.week-today .gantt-week-date{
  color:#14532d;
}
.gantt-table .table td,
.gantt-table table td{
  padding:2px 6px;
  line-height:1.1;
  vertical-align:middle;
}
.gantt-table{
  position:relative;
  isolation:isolate;
}
.gantt-table table th.gantt-col-task,
.gantt-table table td.gantt-col-task{
  position:sticky;
  left:0;
  z-index:10;
  background:linear-gradient(180deg, #e8e7e4 0%, #d6d3ce 100%);
  background-clip:padding-box;
}
.gantt-table table td.gantt-col-task{
  background:#eceae5;
  background-image:none;
}
.gantt-table table th.gantt-col-vendor,
.gantt-table table td.gantt-col-vendor{
  position:sticky;
  left:var(--gcol1, 200px);
  z-index:10;
  background:linear-gradient(180deg, #e8e7e4 0%, #d6d3ce 100%);
  background-clip:padding-box;
}
.gantt-table table td.gantt-col-vendor{
  background:#eceae5;
  background-image:none;
}
.gantt-table table th.gantt-col-status,
.gantt-table table td.gantt-col-status{
  position:sticky;
  left:calc(var(--gcol1, 200px) + var(--gcol2, 120px));
  z-index:10;
  background:linear-gradient(180deg, #e8e7e4 0%, #d6d3ce 100%);
  background-clip:padding-box;
}
.gantt-table table td.gantt-col-status{
  background:#eceae5;
  background-image:none;
}
.gantt-table table.hide-vendor th.gantt-col-vendor,
.gantt-table table.hide-vendor td.gantt-col-vendor{
  display:none;
}
.gantt-table table.hide-status th.gantt-col-status,
.gantt-table table.hide-status td.gantt-col-status{
  display:none;
}
.gantt-table table.hide-vendor{
  --gcol2:0px;
}
.gantt-table table.hide-status{
  --gcol3:0px;
}
.gantt-table table.hide-vendor th.gantt-col-status,
.gantt-table table.hide-vendor td.gantt-col-status{
  left:var(--gcol1, 200px);
}
.gantt-table .table tbody tr,
.gantt-table table tbody tr{
  height:24px;
}
.gantt-table .table tr,
.gantt-table table tr{
  height:auto;
}
.gantt-table .table td.gantt-vendor-cell,
.gantt-table .table td.gantt-status-cell,
.gantt-table .table td:first-child,
.gantt-table table td.gantt-vendor-cell,
.gantt-table table td.gantt-status-cell,
.gantt-table table td:first-child{
  background-image:none !important;
}

/* Grille de fond sur toutes les cellules du Gantt */
.gantt-table .table,
.gantt-table table{
  border-collapse:collapse;
  table-layout:fixed;
  width:100%;
}
.gantt-table .table td,
.gantt-table .table th,
.gantt-table table td,
.gantt-table table th{
  border:1px solid rgba(0,0,0,0.10);
}
.gantt-bar{height:12px;border-radius:10px;border:1px solid var(--bar-border);position:relative;overflow:hidden;z-index:1;box-shadow:var(--bar-shadow);}
.gantt-bar .gantt-days{
  position:absolute;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%);
  padding:0;
  height:auto;
  line-height:1;
  border-radius:0;
  background:transparent;
  font-size:11px;
  font-weight:800;
  color:#f8fafc;
  text-shadow:0 1px 1px rgba(0,0,0,0.55), 0 0 6px rgba(0,0,0,0.35);
  white-space:nowrap;
}
.gantt-cell{padding:2px 4px !important;}
.gantt-cell-inner{
  position:relative;
  min-height:16px;
  display:flex;
  flex-direction:column;
  align-items:flex-start;
  justify-content:center;
  gap:2px;
  width:100%;
}
.gantt-row{
  display:flex;
  align-items:center;
  gap:4px;
  min-height:18px;
  width:100%;
}
.gantt-bar.multi{
  height:12px;
  margin:0;
  border-radius:6px;
}
.gantt-spacer{
  height:12px;
  margin:0;
  border-radius:6px;
  opacity:0;
  width:100%;
  display:block;
  flex:1 1 100%;
}
.bar-wrapper{
  display:flex;
  flex-direction:column;
  align-items:flex-start;
  gap:2px;
  width:100%;
}

/* Charge de travail */
#workloadChart{min-height:200px;}
.wl-axis text{font-size:11px;fill:#0f172a;font-family:var(--sans);}
.wl-bg{fill:#ffffff;}
.wl-bar-internal{filter:var(--wl-shadow);}
.wl-bar-external{filter:var(--wl-shadow);}
.wl-grid{stroke:#e5e7eb;stroke-width:1;}
.wl-grid-vert{stroke:#e5e7eb;stroke-width:1;stroke-dasharray:2 3;}
.wl-legend{display:flex;gap:8px;align-items:center;font-size:12px;font-family:var(--sans);}
.wl-legend .dot{width:10px;height:10px;border-radius:3px;display:inline-block;}
.wl-value{font-size:10px;fill:#0f172a;font-family:var(--sans);}
.gantt-status-cell{
  font-size:10px;
  color:#0b1424;
  font-weight:700;
  text-align:left;
  padding:0 6px;
  vertical-align:middle;
}
.gantt-status-stack{
  display:flex;
  flex-direction:column;
  gap:2px;
  justify-content:center;
  min-height:16px;
}
.gantt-vendor-cell{
  vertical-align:middle;
  width:140px;
  padding:0 6px;
}
.gantt-vendor-cell .badge.owner{
  display:inline-flex;
  align-items:center;
  height:12px;
  padding:0 4px;
  margin:0;
  line-height:12px;
  font-size:11px;
  border-radius:10px;
}
.gantt-vendor-cell .vendor-stack{
  display:flex;
  flex-direction:column;
  gap:2px;
  justify-content:center;
  align-items:flex-start;
  min-height:16px;
}
.gantt-vendor-cell .text-muted{
  color:#6b7280;
  font-size:11px;
}
.gantt-task-col-project{
  width:200px;
  min-width:200px;
  text-align:left;
}
.gantt-task-col-project .num-badge{
  margin-right:6px;
}
.vendor-manage-btn,
.desc-manage-btn{
  position:static;
  width:36px;
  height:36px;
  padding:0;
  font-size:18px;
  line-height:1;
  background:#f3f4f6;
  border:1px solid #d1d5db;
  border-radius:6px;
  box-shadow:inset 0 1px 2px rgba(255,255,255,0.8), 0 1px 2px rgba(0,0,0,0.06);
  z-index:2;
  flex:0 0 auto;
}
.vendor-manage-btn:disabled,
.vendor-manage-btn.is-disabled,
.desc-manage-btn:disabled,
.desc-manage-btn.is-disabled{
  opacity:0.45;
  pointer-events:none;
  cursor:not-allowed;
}
.gantt-status-stack{
  display:flex;
  flex-direction:column;
  gap:2px;
  justify-content:center;
}
.status-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:8px;
  min-height:18px; /* aligne la hauteur avec les lignes de barres gantt */
}
.gantt-vendor-cell{
  vertical-align:middle;
  width:140px;
  padding:2px 6px;
}
.gantt-vendor-cell .vendor-stack{
  display:flex;
  flex-direction:column;
  gap:2px;
  justify-content:center;
}
.gantt-vendor-cell .badge.owner{
  display:inline-flex;
  align-items:center;
  height:14px;
  padding:0 5px;
  font-size:11px;
  line-height:14px;
  border-radius:8px;
  margin:0;
}
.gantt-vendor-cell .text-muted{
  color:#6b7280;
  font-size:11px;
}

/* Champ prestataire custom dropdown */
.vendor-wrap,
.desc-wrap{
  position:relative;
  display:flex;
  align-items:center;
  gap:6px;
}
.vendor-wrap > .input,
.desc-wrap > .input{
  -webkit-appearance: none;
  appearance: none;
  background-image: none !important;
  position:relative;
  padding-right:28px;
  flex:1 1 auto;
  background:linear-gradient(185deg, rgba(248,247,244,0.98) 0%, rgba(232,229,223,0.94) 100%) !important;
  box-shadow:inset 0 1px 2px rgba(255,255,255,0.8), inset 0 -1px 2px rgba(0,0,0,0.04) !important;
  border:1px solid rgba(0,0,0,0.14) !important;
  background-image: url("data:image/svg+xml,%3Csvg width='10' height='6' viewBox='0 0 10 6' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1l4 4 4-4' stroke='%236b7280' stroke-width='1.4' fill='none' stroke-linecap='round'/%3E%3C/svg%3E");
  background-repeat:no-repeat;
  background-position: right 10px center;
  cursor:pointer;
}
#t_vendor::-webkit-calendar-picker-indicator{ display:none !important; }
#t_vendor::-ms-expand{ display:none !important; }
.vendor-dropdown{
  display:none;
}
.vendor-panel{
  position:absolute;
  top:100%;
  right:0;
  left:0;
  margin-top:6px;
  background:#fff;
  border:1px solid rgba(0,0,0,0.12);
  border-radius:10px;
  box-shadow:0 12px 24px rgba(0,0,0,0.18);
  padding:10px;
  z-index:999999;
}
.vendor-dropdown,
.desc-dropdown{
  z-index:999999;
}
.vendor-wrap.vendor-open{z-index:200001;position:relative;}
.desc-wrap.desc-open{z-index:999998;position:relative;}
.card.vendor-panel-open{z-index:200000;position:relative;}
.card.desc-panel-open{z-index:999998;position:relative;}
.desc-overlay{
  position:absolute;
  top:42px;
  left:8px;
  right:8px;
  bottom:8px;
  background:#fff;
  border:1px solid rgba(0,0,0,0.12);
  border-radius:10px;
  box-shadow:0 18px 36px rgba(0,0,0,0.16);
  z-index:999997;
  display:none;
}
.desc-overlay.show{display:block;}
.desc-overlay + .label,
.desc-overlay ~ .desc-wrap{
  position:relative;
  z-index:400001;
}
.status-row .badge.owner{
  margin-left:auto;
}
.badge.site{
  background:rgba(59,130,246,0.12);
  color:#0f172a;
  border:1px solid rgba(59,130,246,0.35);
  white-space:nowrap;
}
.status-cell{
  display:flex;
  align-items:center;
  gap:8px;
  flex-wrap:nowrap;
}
.status-left{
  display:flex;
  align-items:center;
  gap:6px;
}
.status-cell .badge.owner{
  margin-left:auto;
}
.gantt-label{font-size:11px;color:#0b1424;font-weight:700;}
.gantt-table tbody tr{
  cursor:pointer;
  background:var(--site-bg, transparent) !important;
}
.gantt-table tbody tr td{
  background:transparent !important;
}
.gantt-table tbody tr td.gantt-col-task,
.gantt-table tbody tr td.gantt-col-vendor,
.gantt-table tbody tr td.gantt-col-status{
  background:#eceae5 !important;
}
.gantt-table tbody tr:hover td{
  background:inherit;
}
.gantt-meta{color:#64748b;font-size:11px;}
.badge.owner{
  display:inline-flex;
  align-items:center;
  gap:4px;
  padding:2px 8px;
  border-radius:999px;
  background:#111827;
  color:#f8fafc;
  font-size:11px;
  font-weight:700;
  white-space:nowrap;
  opacity:0.9;
  filter:saturate(0.85) brightness(1.05);
  box-shadow:inset 0 0 0 1px rgba(255,255,255,0.18);
}
.icon-picto{margin-right:6px;}
.icon-dot{
  display:inline-block;
  width:10px;
  height:10px;
  border-radius:999px;
  border:1px solid rgba(0,0,0,.4);
  margin-right:6px;
  vertical-align:middle;
}
.legend{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:8px;}
.legend-item{display:flex;align-items:center;gap:6px;font-size:12px;color:#111827;padding:4px 6px;border:1px solid var(--line);border-radius:8px;background:rgba(255,255,255,0.92);}
.legend-dot{width:12px;height:12px;border-radius:999px;border:1px solid rgba(0,0,0,.4);}

.num-badge{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  min-width:18px;
  height:18px;
  padding:2px 6px;
  margin-right:6px;
  border-radius:999px;
  background:var(--badge-color, #1f2937);
  color:var(--badge-text, #f8fafc);
  font-size:11px;
  font-weight:700;
}

@media(max-width:1080px){
  .layout{grid-template-columns:1fr;padding:14px;}
  .sidebar{order:2;position:static;width:auto;max-height:none;overflow:visible;}
  .main{order:1;}
  .table{min-width:720px;}
}

/* Overrides onglets pour surbrillance claire et inactivité atténuée */
.tab{
  background:linear-gradient(180deg, rgba(220,218,212,0.92) 0%, rgba(204,201,195,0.88) 100%) !important;
  border:1px solid rgba(0,0,0,0.12) !important;
  box-shadow:0 7px 14px rgba(0,0,0,0.14), inset 0 1px 0 rgba(255,255,255,0.55) !important;
  opacity:0.9;
}
.tab.active{
  background:linear-gradient(180deg, rgba(255,255,255,1) 0%, rgba(230,225,215,0.9) 100%) !important;
  border-color: rgba(0,0,0,0.25) !important;
  box-shadow:0 0 0 3px rgba(0,0,0,0.14), inset 0 1px 0 rgba(255,255,255,0.8) !important;
  color:#111 !important;
  font-weight:800 !important;
  opacity:1 !important;
}

/* --- Overrides pour fonds plus foncés / effet glass léger --- */
.sidebar{
  background:linear-gradient(135deg, rgba(232,229,223,0.95) 0%, rgba(212,208,201,0.9) 45%, rgba(238,236,230,0.95) 100%);
  border:1px solid rgba(0,0,0,0.14);
  box-shadow:0 18px 34px rgba(15,23,42,0.20), inset 0 1px 0 rgba(255,255,255,0.45);
}
.tab{
  border:1px solid rgba(0,0,0,0.12);
  background:linear-gradient(180deg, rgba(235,233,227,0.95) 0%, rgba(214,211,205,0.9) 100%);
  box-shadow:0 7px 14px rgba(0,0,0,0.14), inset 0 1px 0 rgba(255,255,255,0.55);
}
.panel{
  background:linear-gradient(160deg, rgba(246,245,242,0.98) 0%, rgba(231,228,222,0.94) 45%, rgba(248,247,244,0.99) 100%);
  border:1px solid rgba(0,0,0,0.08);
  box-shadow:0 14px 30px rgba(15,23,42,0.12), inset 0 1px 0 rgba(255,255,255,0.6);
  min-width:0;
}
.card{
  background:linear-gradient(190deg, rgba(244,243,239,0.98) 0%, rgba(228,226,220,0.94) 55%, rgba(245,244,241,0.98) 100%);
  border:1px solid rgba(0,0,0,0.10);
  box-shadow:0 12px 24px rgba(0,0,0,0.10), inset 0 1px 0 rgba(255,255,255,0.55);
  border-radius:14px;
  padding:12px;
  backdrop-filter:blur(8px);
  overflow:visible;
  position:relative;
  z-index:1;
  min-width:0;
}
.tablewrap{
  border:1px solid rgba(0,0,0,0.10);
  background:linear-gradient(180deg, rgba(246,245,242,0.98) 0%, rgba(232,230,224,0.94) 100%);
  box-shadow:0 8px 18px rgba(0,0,0,0.10), inset 0 1px 0 rgba(255,255,255,0.55);
  position:relative;
  z-index:0;
  overflow:auto;
}
.table th{
  background:linear-gradient(180deg, rgba(241,240,236,0.96) 0%, rgba(224,221,215,0.92) 100%);
}
.table td{
  background:rgba(245,244,240,0.92);
}
.input, textarea, select{
  border:1px solid rgba(0,0,0,0.14);
  background:linear-gradient(185deg, rgba(248,247,244,0.98) 0%, rgba(232,229,223,0.94) 100%);
}
.multiselect-display{
  border:1px solid rgba(0,0,0,0.14);
  background:linear-gradient(185deg, rgba(248,247,244,0.98) 0%, rgba(232,229,223,0.94) 100%);
}
.btn{
  border:1px solid rgba(0,0,0,0.14);
  background:linear-gradient(182deg, rgba(236,234,229,0.97) 0%, rgba(223,221,216,0.9) 100%);
  box-shadow:0 8px 14px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.55);
}
.btn:focus{outline:none;}

/* Indicateurs de tri visibles en permanence */
.table th[data-sort]::after{content:" ▲▼";font-size:11px;color:#64748b;margin-left:6px;opacity:1;}
.table th.sorted-asc::after{content:" ▲";color:#0f172a;opacity:1;}
.table th.sorted-desc::after{content:" ▼";color:#0f172a;opacity:1;}


